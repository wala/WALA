plugins {
	id 'com.diffplug.eclipse.mavencentral'
	id 'com.github.hauner.jarTest' version '1.0.1'
	id 'eclipse'
}

eclipse.project.natures 'org.eclipse.pde.PluginNature'

eclipseMavenCentral {
	release eclipseVersion, {
		[
				'org.eclipse.core.commands',
				'org.eclipse.core.jobs',
				'org.eclipse.core.resources',
				'org.eclipse.core.runtime',
				'org.eclipse.equinox.common',
				'org.eclipse.jface',
				'org.eclipse.osgi',
				'org.eclipse.ui.ide',
		].each { dep 'testImplementation', it }
		useNativesForRunningPlatform()
	}
}

dependencies {
	testImplementation(
			'org.eclipse.platform:org.eclipse.osgi:3.16.300',
			project(':com.ibm.wala.core'),
			project(':com.ibm.wala.ide'),
			project(':com.ibm.wala.util'),
	)
	testImplementation('org.eclipse.platform:org.eclipse.ui.workbench') {
		version { strictly '3.120.0' }
	}
}

configurations.all {
	resolutionStrategy.dependencySubstitution {
		substitute module('org.eclipse.platform:org.eclipse.osgi.services') using module('org.eclipse.platform:org.eclipse.osgi:3.15.100') because 'both provide several of the same classes, but org.eclipse.osgi includes everything we need from both'
		substitute module('xml-apis:xml-apis-ext') using module('org.eclipse.birt.runtime:org.w3c.css.sac:1.3.1.v200903091627') because 'both provide several of the same classes, but org.w3c.css.sac includes everything we need from both'
	}
}
